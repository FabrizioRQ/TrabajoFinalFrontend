<div class="register-container">
  <div class="register-card">
    <div class="header">
      <img src="logo.jpg" alt="Monstruo Amigo Icono" class="app-icon">
      <h1>Monstruos Amigos</h1>
    </div>

    <h2>Registro de Psicólogo</h2>

    <form class="register-form" (ngSubmit)="registrarPsicologo()">

      <div class="form-group id-group">
        <label for="usuario">Seleccionar Usuario</label>

        <select
          id="usuario"
          name="usuario"
          [(ngModel)]="psicologo.idUsuario"
          required
          class="form-control"
          [disabled]="cargando"
        >
          <option value="" disabled selected>
            {{ cargando ? 'Cargando usuarios...' : 'Selecciona un usuario' }}
          </option>
          <option
            *ngFor="let usuario of usuarios"
            [value]="usuario.id"
          >
            {{ usuario.nombreCompleto }} - {{ usuario.correoElectronico }}
          </option>
        </select>

        <!-- Mensaje cuando no hay usuarios -->
        <div *ngIf="!cargando && usuarios.length === 0" class="no-users-text">
          No hay usuarios registrados en el sistema.
        </div>

        <!-- Mostrar usuario seleccionado -->
        <div *ngIf="getNombreUsuarioSeleccionado()" class="selected-user">
          <small>Usuario seleccionado: <strong>{{ getNombreUsuarioSeleccionado() }}</strong></small>
        </div>
      </div>

      <div class="additional-data-box">
        <p class="subtitle">Datos profesionales</p>

        <div class="form-group">
          <label for="especialidad">Especialidad</label>
          <input
            type="text"
            id="especialidad"
            name="especialidad"
            [(ngModel)]="psicologo.especialidad"
            placeholder="Ej: Psicología infantil"
            required
            [disabled]="cargando"
          >
        </div>

        <div class="form-group">
          <label for="numeroColegiatura">Número de colegiatura</label>
          <input
            type="text"
            id="numeroColegiatura"
            name="numeroColegiatura"
            [(ngModel)]="psicologo.numeroColegiatura"
            placeholder="Ej: 12345-CMP"
            required
            [disabled]="cargando"
          >
        </div>
      </div>

      <button
        type="submit"
        class="save-button"
        [disabled]="cargando || !psicologo.idUsuario || !psicologo.especialidad || !psicologo.numeroColegiatura"
      >
        {{ cargando ? 'Cargando...' : 'Registrar' }}
      </button>

      <div
        *ngIf="mensaje"
        class="message"
        [ngClass]="{'error': mensajeEsError, 'success': !mensajeEsError}"
      >
        {{ mensaje }}
      </div>
    </form>
  </div>
</div>
